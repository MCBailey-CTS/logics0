from Loc import Loc


class Futoshiki:
    def __init__(self, puzzle: str) -> None:
        array = []
        for line in puzzle.split("\n"):
            temp = line.strip()
            if len(temp) == 0:
                continue
            # print(temp)

            array.append(temp)
        self.__id = array[0]
        self.__length = int(array[1])
        array.pop(0)
        array.pop(0)
        self.__grid = []
        for r in range(self.__length * 2 - 1):
            line = array[0].strip().replace("  ", " ", -1).split(" ")
            print(line)
            self.__grid.append(line)
            array.pop(0)

        # print("/////")
        # print(array)

    def id(self) -> str:
        return self.__id

    @property
    def length(self):
        return self.__length

    def cell_string(self, loc: Loc) -> str:
        return self.__grid[loc.row][loc.col]

    def cell_candidates(self, loc: Loc) -> list[int]:
        return [int(s) for s in self.__grid[loc.row][loc.col] if s.isnumeric()]

    def rem(self, locs: list[Loc], candidates: list) -> int:
        edits = 0

        for loc in locs:
            for candidate in candidates:
                cell_candidates = self.cell_candidates(loc)
                if candidate not in cell_candidates:
                    continue
                self.__grid[loc.row][loc.col] = self.__grid[loc.row][loc.col].replace(candidate, "_")
                edits += 1

        return edits

    def __str__(self):
        string = f'{self.__id}\n'
        string += f'{self.__length}\n'

        for r in range(self.__length * 2 - 1):
            for c in range(self.__length * 2 - 1):
                string += f'{self.__grid[r][c]} '
            string += '\n'
        return string

# @staticmethod
# def futoshiki_explicit_cross_hatch_actual():
#     return f"""
#     futoshiki_explicit_cross_hatch_actual.futoshiki
#     4
#     __3_ ... ____ ... ____ ... ____
#     .... ... .... ... .... ... ....
#     ____ ... ____ ... ____ ... ____
#     .... ... .... ... .... ... ....
#     ____ ... ____ ... ____ ... ____
#     .... ... .... ... .... ... ....
#     ____ ... ____ ... ____ ... ____
#     """

# @staticmethod
# def futoshiki_explicit_cross_hatch_expected():
#     return f"""
#     futoshiki_explicit_cross_hatch_expected.futoshiki
#     4
#     __3_ ... 12_4 ... 12_4 ... 12_4
#     .... ... .... ... .... ... ....
#     12_4 ... ____ ... ____ ... ____
#     .... ... .... ... .... ... ....
#     12_4 ... ____ ... ____ ... ____
#     .... ... .... ... .... ... ....
#     12_4 ... ____ ... ____ ... ____
#     """

# @staticmethod
# def futoshiki_explicit_hidden_single_actual():
#     return f"""
#     futoshiki_explicit_hidden_single_actual.futoshiki
#     4
#     123_ ... 123_ ... 123_ ... ____
#     .... ... .... ... .... ... ....
#     ____ ... ____ ... 123_ ... ____
#     .... ... .... ... .... ... ....
#     ____ ... ____ ... 123_ ... ____
#     .... ... .... ... .... ... ....
#     ____ ... ____ ... ____ ... ____
#     """

# @staticmethod
# def futoshiki_explicit_hidden_single_expected():
#     return f"""
#     futoshiki_explicit_hidden_single_expected.futoshiki
#     4
#     123_ ... 123_ ... 123_ ... ___4
#     .... ... .... ... .... ... ....
#     ____ ... ____ ... 123_ ... ____
#     .... ... .... ... .... ... ....
#     ____ ... ____ ... 123_ ... ____
#     .... ... .... ... .... ... ....
#     ____ ... ____ ... ___4 ... ____
#     """



# @staticmethod
# def futoshiki_greater_than_rows_cols_actual():
#     return f"""
#     futoshiki_greater_than_rows_cols_actual.kropki
#     2
#     12a . 12b
#     ... . ...
#     12a > 12b
#     """

# @staticmethod
# def futoshiki_greater_than_rows_cols_expected():
#     return f"""
#     futoshiki_greater_than_rows_cols_expected.kropki
#     2
#     12a . 12b
#     ... . ...
#     _2a > 1_b
#     """



# @staticmethod
# def futoshiki_001():
#     return f"""
#     001.futoshiki
#     4
#     ___4 > 1234 . 1234 . 1234
#     .      ^      .      v
#     _2__ < 1234 > __3_ > 1234
#     .      .      .      ^
#     1234 . _2__ . 1234 < 1234
#     v      ^      ^      v
#     1___ . __3_ < 1234 . 1234
#     """














# @staticmethod
# def futoshiki_001():
#     return f"""
#     001.futoshiki
#     9
#     123456789a < 123456789a < 123456789a . 123456789b > 123456789b > 123456789b . 123456789c > 123456789c > 123456789c
#     ^      _     ^      _     v      _     v      _     ^      _     v      _     v      _     ^      _     ^
#     123456789a < 123456789a > 123456789a . 123456789b < 123456789b > 123456789b . 123456789c < 123456789c > 123456789c
#     v      _     ^      _     ^      _     v      _     ^      _     ^      _     ^      _     v      _     ^
#     123456789a < 123456789a > 123456789a . 123456789b < 123456789b > 123456789b . 123456789c < 123456789c < 123456789c
#     .      _     .      _     .      _     .      _     .      _     .      _     .      _     .      _     .
#     123456789d > 123456789d > 123456789d . 123456789e > 123456789e < 123456789e . 123456789f > 123456789f > 123456789f
#     ^      _     ^      _     ^      _     v      _     ^      _     v      _     v      _     v      _     v
#     123456789d < 123456789d > 123456789d . 123456789e < 123456789e < 123456789e . 123456789f < 123456789f > 123456789f
#     v      _     v      _     v      _     ^      _     v      _     v      _     ^      _     ^      _     ^
#     123456789d < 123456789d > 123456789d . 123456789e > 123456789e < 123456789e . 123456789f < 123456789f > 123456789f
#     .      _     .      _     .      _     .      _     .      _     .      _     .      _     .      _     .
#     123456789g > 123456789g < 123456789g . 123456789h > 123456789h < 123456789h . 123456789i < 123456789i < 123456789i
#     ^      _     ^      _     ^      _     v      _     ^      _     v      _     v      _     v      _     v
#     123456789g > 123456789g < 123456789g . 123456789h < 123456789h > 123456789h . 123456789i > 123456789i < 123456789i
#     v      _     v      _     v      _     v      _     v      _     ^      _     ^      _     v      _     ^
#     123456789g > 123456789g < 123456789g . 123456789h > 123456789h < 123456789h . 123456789i > 123456789i < 123456789i
#     """

# @staticmethod
# def futoshiki_002():
#     return f"""
#     002.futoshiki
#     9
#     123456789a > 123456789a < 123456789a . 123456789b < 123456789b < 123456789b . 123456789c < 123456789c < 123456789c
#     ^      _     v      _     v      _     ^      _     v      _     v      _     ^      _     ^      _     v
#     123456789a > 123456789a < 123456789a . 123456789b > 123456789b > 123456789b . 123456789c < 123456789c > 123456789c
#     v      _     ^      _     ^      _     v      _     v      _     v      _     ^      _     v      _     ^
#     123456789a > 123456789a < 123456789a . 123456789b > 123456789b > 123456789b . 123456789c < 123456789c > 123456789c
#     .      _     .      _     .      _     .      _     .      _     .      _     .      _     .      _     .
#     123456789d < 123456789d < 123456789d . 123456789e > 123456789e < 123456789e . 123456789f > 123456789f < 123456789f
#     v      _     ^      _     ^      _     v      _     ^      _     ^      _     ^      _     ^      _     v
#     123456789d < 123456789d < 123456789d . 123456789e > 123456789e < 123456789e . 123456789f > 123456789f > 123456789f
#     ^      _     ^      _     v      _     ^      _     ^      _     ^      _     v      _     v      _     ^
#     123456789d < 123456789d > 123456789d . 123456789e > 123456789e > 123456789e . 123456789f > 123456789f < 123456789f
#     .      _     .      _     .      _     .      _     .      _     .      _     .      _     .      _     .
#     123456789g < 123456789g > 123456789g . 123456789h < 123456789h > 123456789h . 123456789i > 123456789i > 123456789i
#     ^      _     ^      _     v      _     v      _     v      _     ^      _     v      _     ^      _     ^
#     123456789g < 123456789g > 123456789g . 123456789h < 123456789h < 123456789h . 123456789i > 123456789i < 123456789i
#     ^      _     ^      _     ^      _     v      _     ^      _     v      _     v      _     ^      _     v
#     123456789g > 123456789g > 123456789g . 123456789h < 123456789h > 123456789h . 123456789i < 123456789i < 123456789i
#     """

# @staticmethod
# def futoshiki_003():
#     return f"""
#     003.futoshiki
#     9
#     123456789a > 123456789a < 123456789a . 123456789b < 123456789b < 123456789b . 123456789c > 123456789c < 123456789c
#     v      _     ^      _     v      _     ^      _     v      _     v      _     ^      _     v      _     ^
#     123456789a > 123456789a < 123456789a . 123456789b > 123456789b < 123456789b . 123456789c > 123456789c > 123456789c
#     ^      _     ^      _     v      _     v      _     ^      _     v      _     v      _     ^      _     v
#     123456789a < 123456789a > 123456789a . 123456789b < 123456789b > 123456789b . 123456789c < 123456789c < 123456789c
#     .      _     .      _     .      _     .      _     .      _     .      _     .      _     .      _     .
#     123456789d < 123456789d > 123456789d . 123456789e < 123456789e > 123456789e . 123456789f < 123456789f < 123456789f
#     ^      _     ^      _     ^      _     v      _     v      _     ^      _     v      _     v      _     v
#     123456789d > 123456789d < 123456789d . 123456789e > 123456789e < 123456789e . 123456789f > 123456789f < 123456789f
#     ^      _     v      _     v      _     v      _     v      _     v      _     ^      _     ^      _     v
#     123456789d > 123456789d > 123456789d . 123456789e > 123456789e < 123456789e . 123456789f < 123456789f > 123456789f
#     .      _     .      _     .      _     .      _     .      _     .      _     .      _     .      _     .
#     123456789g < 123456789g < 123456789g . 123456789h > 123456789h > 123456789h . 123456789i < 123456789i > 123456789i
#     ^      _     ^      _     v      _     v      _     v      _     v      _     v      _     ^      _     v
#     123456789g > 123456789g > 123456789g . 123456789h > 123456789h > 123456789h . 123456789i < 123456789i > 123456789i
#     v      _     ^      _     ^      _     v      _     v      _     ^      _     ^      _     v      _     ^
#     123456789g < 123456789g < 123456789g . 123456789h < 123456789h < 123456789h . 123456789i > 123456789i > 123456789i
#     """


   

# @staticmethod
# def futoshiki_010():
#     return f"""
#     010.futoshiki
#     5
#     34...
#     2..31
#     .....
#     ..15.
#     .1.2.
#     <>.<
#     .....
#     ...>
#     ..^^.
#     ..>>
#     .v..^
#     .><>
#     ^..v.
#     ..>.
#     """
# @staticmethod
# def futoshiki_015():
#     return f"""
#     015.futoshiki
#     9
#     123456789a < 123456789a > 123456789a . 123456789b > 123456789b < 123456789b . 123456789c > 123456789c < 123456789c
#     v _ v _ ^ _ ^ _ ^ _ ^ _ ^ _ ^ _ v
#     123456789a > 123456789a > 123456789a . 123456789b > 123456789b < 123456789b . 123456789c > 123456789c > 123456789c
#     ^ _ ^ _ v _ ^ _ ^ _ v _ v _ ^ _ ^
#     123456789a < 123456789a > 123456789a . 123456789b > 123456789b < 123456789b . 123456789c < 123456789c > 123456789c
#     . _ . _ . _ . _ . _ . _ . _ . _ .
#     123456789d > 123456789d < 123456789d . 123456789e > 123456789e > 123456789e . 123456789f > 123456789f < 123456789f
#     v _ v _ ^ _ v _ v _ ^ _ v _ ^ _ ^
#     123456789d > 123456789d < 123456789d . 123456789e < 123456789e < 123456789e . 123456789f < 123456789f > 123456789f
#     ^ _ ^ _ ^ _ v _ ^ _ v _ v _ v _ v
#     123456789d < 123456789d < 123456789d . 123456789e < 123456789e > 123456789e . 123456789f > 123456789f < 123456789f
#     . _ . _ . _ . _ . _ . _ . _ . _ .
#     123456789g < 123456789g < 123456789g . 123456789h < 123456789h > 123456789h . 123456789i < 123456789i < 123456789i
#     v _ ^ _ v _ v _ v _ ^ _ ^ _ ^ _ v
#     123456789g < 123456789g < 123456789g . 123456789h < 123456789h > 123456789h . 123456789i > 123456789i > 123456789i
#     ^ _ v _ v _ v _ ^ _ ^ _ v _ v _ ^
#     123456789g > 123456789g < 123456789g . 123456789h < 123456789h < 123456789h . 123456789i > 123456789i > 123456789i
#     """

# @staticmethod
# def futoshiki_023():
#     return f"""
#     023.futoshiki
#     9
#     123456789a < 123456789a . 123456789h < 123456789h . 123456789i > 123456789i < 123456789i . 123456789d < 123456789d
#     v _   . _   . _   . _   ^ _   v _   v _   ^ _   v
#     123456789a . 123456789h < 123456789h > 123456789h . 123456789i > 123456789i . 123456789i . 123456789d < 123456789d
#     v _   . _   . _   . _   . _   . _   v _   v _   v
#     123456789a . 123456789g . 123456789g . 123456789h > 123456789h . 123456789h . 123456789i . 123456789d > 123456789d
#     . _   . _   ^ _   . _   v _   . _   . _   v _   .
#     123456789a . 123456789g > 123456789g < 123456789g . 123456789h . 123456789i < 123456789i . 123456789d . 123456789c
#     . _   . _   . _   v _   . _   . _   . _   ^ _   v
#     123456789a > 123456789a < 123456789a . 123456789g . 123456789g > 123456789g . 123456789g . 123456789d . 123456789c
#     . _   . _   . _   . _   . _   . _   . _   ^ _   v
#     123456789a . 123456789f . 123456789f . 123456789f > 123456789f < 123456789f > 123456789f . 123456789d . 123456789c
#     . _   . _   . _   v _   . _   ^ _   v _   . _   ^
#     123456789e > 123456789e > 123456789e . 123456789f . 123456789e . 123456789f . 123456789f . 123456789c > 123456789c
#     ^ _   ^ _   . _   . _   v _   . _   . _   v _   v
#     123456789e . 123456789e < 123456789e > 123456789e < 123456789e . 123456789c > 123456789c < 123456789c . 123456789c
#     . _   . _   . _   . _   . _   . _   . _   . _   .
#     123456789b < 123456789b > 123456789b . 123456789b < 123456789b < 123456789b < 123456789b > 123456789b > 123456789b
#     """






